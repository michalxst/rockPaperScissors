<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <p id="roundNumber">Round number:  <span id="currentRound"></span> </p>
        <button id="restart"> Restart game </button>
    </div>
    <div class="enemies">Player score - Computer score</div>

    <div id="currentScore">
        <p id="humanScore"></p>
        <p> - </p>
        <p id="computerScore"></p>
    </div>
    <div id="buttons"> 
        <button class="choiceButtons" id="rock"> Rock </button>
        <button class="choiceButtons" id="paper"> Paper </button>
        <button class="choiceButtons" id="scissors"> Scissors </button>
    </div>
    <div id="roundResults"></div>
</body>


<script>

    let humanScore = 0;
    let computerScore = 0;
    let roundNumber = 0;
    let continueGame = true;


    const buttons = document.querySelectorAll(".choiceButtons");
    const round = document.querySelector("#roundResults");
    const humanCurrentScore = document.querySelector("#humanScore");
    const computerCurrentScore = document.querySelector("#computerScore");
    const currentRound = document.querySelector("#currentRound")

    humanCurrentScore.textContent = humanScore;
    computerCurrentScore.textContent = computerScore;
    currentRound.textContent = roundNumber + 1;

    const clearRoundResults = () => {
        round.innerHTML = "";
    };

    const updateScore = () => {
        humanCurrentScore.textContent = humanScore;
        computerCurrentScore.textContent = computerScore;

    };

    const playAgain = () => {
            humanScore = 0;
            computerScore = 0;
            roundNumber = 0;
            updateScore();
            clearRoundResults();
            currentRound.textContent = roundNumber + 1;
    };

    const endGame = () => {
            if (humanScore > computerScore){
                alert("Player wins!");
            }
            else if (humanScore < computerScore){
                alert("Computer wins!");
            }
            else {
                alert("DRAW!!");
            }
            playAgain();
    };

    const getComputerChoice = () => {
        let result = (Math.floor(Math.random() * 10)) % 3;
        if (result == 0) {
            return "scissors"
        }
        else if (result == 1){
            return "rock"
        }
        else {
            return "paper"
        }
    };

    const playRound = (humanChoice, computerChoice) => {
        roundNumber++ ;
        if (humanChoice === computerChoice) {
            return "draw"
            
        }
        else if (humanChoice === "paper") {
            if (computerChoice === "rock") {
                ++humanScore;
                return "win for human"
            }
            else {
                ++computerScore;
                return "win for computer"
            }
        }
        else if (humanChoice === "rock") {
            if (computerChoice === "scissors") {
                ++humanScore;
                return "win for human"
            } 
            else {
                ++computerScore;
                return "win for computer"
            }
        }
        else {
            if (computerChoice === "paper") {
                ++humanScore;
                return "win for human"
            } 
            else {
                ++computerScore;
                return "win for computer"

            }
        }

    };

    buttons.forEach((button) => {
        button.addEventListener("click", () => {
            const roundResult = document.createElement("div");
            const computerCurrentChoice = getComputerChoice();

            roundResult.textContent = playRound(button.id, computerCurrentChoice);
            updateScore();
            round.appendChild(roundResult);

            if (roundNumber < 5){
                currentRound.textContent = roundNumber + 1;
            }

            if (roundNumber == 5) {
                setTimeout(() => {
                endGame();
            }, 0);
            }

        });
    });

    
    const restartButton = document.querySelector("#restart");
    restartButton.addEventListener("click", () => {
        playAgain();
    });

</script>
</html>